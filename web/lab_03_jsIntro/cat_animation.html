<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Walking Cat</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <style>
            body {
                background-color: lightgreen;
            }
        </style>
    </head>
    <body>
        <div id="walking_cat_01"></div>
        <div id="walking_cat_02"></div>

        <input type="button" value="Make a cat!" 
               onclick="callMakeCat({id: 'walking_cat_01', top: '600px'});">
        <input type="button" value="Make another cat!" 
               onclick="callMakeCat({id: 'walking_cat_02', top: '600px', left: '400px', backgroundPosition: '-270px -290px'})">
        <br><br>
        <input type="button" value="Change Sprite 01" 
               onclick ="callChangeSprite('walking_cat_01')">
        <input type="button" value="Walk Cat 01"
               onclick = "animateCat01('walking_cat_01')">
        <input type="button" value="Stop Cat 01"
               onclick = "stopCat01('walking_cat_01')">
        Change cat 01 left position:
        <input type="text" id="01_left">
        Change cat 01 top position:
        <input type="text" id="01_top">
        <input type="button" value="Change Cat 01 Position"
               onclick="callChangePosition01('walking_cat_01')">

        <br><br>
        <input type="button" value="Change Sprite 02" 
               onclick ="callChangeSprite('walking_cat_02')">
        <input type="button" value="Walk Cat 02"
               onclick = "animateCat02('walking_cat_02')">
        <input type="button" value="Stop Cat 02"
               onclick = "stopCat02('walking_cat_02')">
        Change cat 02 left position:
        <input type="text" id="02_left">
        Change cat 02 top position:
        <input type="text" id="02_top">
        <input type="button" value="Change Cat 02 Position"
               onclick="callChangePosition02('walking_cat_02')">
        <br>
        <h2>Instructions</h2>
        <p>
            Click the 'make a cat' button to create a cat.  Use the 'change sprite'
            button to cycle through the sprite images used to make the walking animation.
            Click the 'walk the cat' button to start the walking animation, and the
            'stop cat' button to stop the animation.  Two different cats are
            able to be created and animated in this page.
        </p>

        <script src="cat_animation_framework.js"></script>
        <script type="text/javascript">

                   var catFramework = makeCatFramework();
                   var cat_01_sprite_positions = ["-10px -200px", "-100px -200px", "-186px -200px"];
                   var cat_02_sprite_positions = ["-270px -290px", "-360px -290px", "-450px -290px"];
                   var curr_position = 0;
                   var catSpeed = 10;
                   var cat01 = document.getElementById("walking_cat_01");
                   var cat02 = document.getElementById("walking_cat_02");
                   function callMakeCat(params) {
                       //window.console.log('param in callMakecat:', params.id);
                       catFramework.makeCat(params);
                   }

                   function callChangeSprite(id) {
                       curr_position++;
                       if (curr_position > 2) {
                           curr_position = 0;
                       }
                       console.log(curr_position);
                       if (id.search("01") >= 0) {
                           position = cat_01_sprite_positions[curr_position];
                       } else {
                           position = cat_02_sprite_positions[curr_position];
                       }
                       console.log(position);
                       catFramework.changeSprite(id, position);
                   }

                   function callMoveCat(id) {
                       console.log('inside of callMoveCat with id ', id)
                       catFramework.moveCat(id, catSpeed);
                   }

                   var interval01;
                   var interval02;
                   function animateCat01(id) {
                       //callMoveCat(id);
                       interval01 = setInterval(function () {
                           callChangeSprite(id);
                           callMoveCat(id);
                       }, 200)
                   }

                   function animateCat02(id) {
                       //callMoveCat(id);
                       interval02 = setInterval(function () {
                           callChangeSprite(id);
                       }, 200)
                   }

                   function stopCat01() {
                       clearInterval(interval01);
                   }
                   function stopCat02() {
                       clearInterval(interval02);
                   }

                   function callChangePosition01(id) {
                       catFramework.changePosition(
                               {id: id,
                                   left: document.getElementById('01_left').value,
                                   top: document.getElementById('01_top').value,
                               }
                       );
                   }
                   function callChangePosition02(id) {
                       catFramework.changePosition(
                               {id: id,
                                   left: document.getElementById('02_left').value,
                                   top: document.getElementById('02_top').value,
                               }
                       );
                   }
        </script>
    </body>
</html>
